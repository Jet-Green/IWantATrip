import{u as E,m as M,r as f,n as S,b as p,o as q,c as F,d as e,e as v,g as P,w as l,H as g,h as d,s as B,x as u,a as D,y as w}from"./index.0a2bdc2d.js";import{u as N,G as O}from"./guide.16bbc1dd.js";import{_ as V}from"./ImageCropper.f99bd2c4.js";const $=d("h2",null,"\u0414\u043E\u0431\u0430\u0432\u044C \u043E\u0431\u044A\u0435\u043A\u0442",-1),A=["onSubmit"],I=u(" \u041D\u0430\u0437\u0432\u0430\u043D\u0438\u0435 "),L=d("span",{class:"mdi mdi-12px mdi-plus"},null,-1),T=u(" \u0434\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0444\u043E\u0442\u043E "),H={class:"d-flex ma-2",style:{"overflow-x":"scroll"}},J=["src"],K=d("h3",null,"\u0423\u0434\u0430\u043B\u0438\u0442\u044C \u0444\u043E\u0442\u043E?",-1),Q={class:"d-flex justify-center"},W=u("\u0414\u0430 "),X=u(" \u041E\u043F\u0438\u0441\u0430\u043D\u0438\u0435 "),Y=u(" \u0410\u0434\u0440\u0435\u0441 "),Z=u(" \u0422\u0435\u043B\u0435\u0444\u043E\u043D "),ee=u(" \u0421\u043E\u0446\u0438\u0430\u043B\u044C\u043D\u044B\u0435 \u0441\u0435\u0442\u0438 "),te=u("\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),ne={__name:"AddGuideElement",setup(ae){const k=N(),h=E(),U=M();let n=f(!1),i=f(!1),G=f(null),y=null,m=f();const s=S({image:"",name:"",address:"",phone:"",socialMedia:"",description:"",type:""});function C(c){n.value=!1,y=c;const t=URL.createObjectURL(c);m.value=t}function R(){m.value="",i.value=!1}function j(){s.type=h.query.type,k.createGuideElement(s).then(c=>{D.post(`http://localhost:4089/add-guide?name=${s.name}`);function t(){U.push("/"+h.query.type)}const r=c.data._id;let o=new FormData;o.append("guide-element-image",y,r+"_0.png"),O.uploadGuideElementImage(o).then(_=>{Object.assign(s,{image:"",name:"",address:"",phone:"",socialMedia:"",description:"",type:""}),y=null,m.value=null,w.config({duration:3,top:"90vh"}),w.success({content:"\u041E\u0431\u044A\u0435\u043A\u0442 \u0441\u043E\u0437\u0434\u0430\u043D!",onClose:t})})})}return(c,t)=>{const r=p("a-input"),o=p("a-col"),_=p("a-button"),x=p("a-modal"),z=p("a-textarea"),b=p("a-row");return q(),F("div",null,[e(P,{backRoute:"/"+v(h).query.type},null,8,["backRoute"]),e(b,{type:"flex",justify:"center"},{default:l(()=>[e(o,{xs:22,lg:12},{default:l(()=>[$,d("form",{action:"POST",onSubmit:B(j,["prevent"]),enctype:"multipart/form-data",ref_key:"newGuideElementForm",ref:G},[e(b,{gutter:[16,16]},{default:l(()=>[e(o,{span:24},{default:l(()=>[I,e(r,{placeholder:"\u041C\u0443\u0437\u0435\u0439",size:"large",value:s.name,"onUpdate:value":t[0]||(t[0]=a=>s.name=a)},null,8,["value"])]),_:1}),e(o,{span:24},{default:l(()=>[e(_,{onClick:t[1]||(t[1]=a=>g(n)?n.value=!0:n=!0),class:"mb-8",type:"dashed",block:""},{default:l(()=>[L,T]),_:1}),d("div",H,[d("img",{src:v(m),alt:"",class:"ma-4",style:{"max-width":"200px",cursor:"pointer"},onClick:t[2]||(t[2]=a=>{g(i)?i.value=!0:i=!0})},null,8,J),e(x,{visible:v(i),"onUpdate:visible":t[3]||(t[3]=a=>g(i)?i.value=a:i=a),footer:null},{default:l(()=>[K,d("div",Q,[e(_,{class:"mt-16",type:"primary",size:"large",onClick:R},{default:l(()=>[W]),_:1})])]),_:1},8,["visible"])])]),_:1}),e(o,{span:24},{default:l(()=>[X,e(z,{placeholder:"\u0411\u043E\u043B\u0435\u0435 1000 \u044D\u043A\u0441\u043F\u043E\u043D\u044F\u0442\u043E\u0432 \u0438\u0437 25 \u0441\u0442\u0440\u0430\u043D \u043C\u0438\u0440\u0430",rows:4,value:s.description,"onUpdate:value":t[4]||(t[4]=a=>s.description=a)},null,8,["value"])]),_:1}),e(o,{span:24},{default:l(()=>[Y,e(r,{placeholder:"\u041A\u0430\u043B\u0438\u043D\u0438\u043D\u0430 2\u0410",size:"large",value:s.address,"onUpdate:value":t[5]||(t[5]=a=>s.address=a)},null,8,["value"])]),_:1}),e(o,{span:24},{default:l(()=>[Z,e(r,{placeholder:"79127528871",size:"large",value:s.phone,"onUpdate:value":t[6]||(t[6]=a=>s.phone=a)},null,8,["value"])]),_:1}),e(o,{span:24},{default:l(()=>[ee,e(r,{placeholder:"https://vk.com/qbitclub",size:"large",value:s.socialMedia,"onUpdate:value":t[7]||(t[7]=a=>s.socialMedia=a)},null,8,["value"])]),_:1})]),_:1}),e(b,{class:"d-flex justify-center"},{default:l(()=>[e(o,null,{default:l(()=>[e(_,{type:"primary","html-type":"submit",class:"lets_go_btn mt-8",size:"large"},{default:l(()=>[te]),_:1})]),_:1})]),_:1})],40,A)]),_:1})]),_:1}),e(x,{visible:v(n),"onUpdate:visible":t[8]||(t[8]=a=>g(n)?n.value=a:n=a),footer:null},{default:l(()=>[e(V,{onAddImage:C})]),_:1},8,["visible"])])}}};export{ne as default};
