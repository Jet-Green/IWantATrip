import{k as B,m as F,i as A,j as E,n as O,r as N,I as $,b as m,o as b,c as x,d as e,e as a,q as U,w as t,g as I,T as _,H as J,h as j,x as V,a6 as P,y as S}from"./index.0a2bdc2d.js";import{_ as H,a as M}from"./auth_right.d8800ad3.js";import{c as D,a as g,F as G,b as h,E as v}from"./vee-validate.esm.5a513712.js";const K={key:0,src:H,style:{position:"fixed",left:"0px",bottom:"0px",width:"20%"}},Q={key:1,src:M,style:{position:"fixed",right:"0px",bottom:"0px",width:"20%"}},W=j("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F",-1),X={class:"d-flex justify-center"},Y=V("\u041E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C"),Z=V("\u0432\u043E\u0439\u0442\u0438"),ee=V("\u0437\u0430\u0431\u044B\u043B\u0438 \u043F\u0430\u0440\u043E\u043B\u044C?"),ne={__name:"RegForm",setup(ae){const q=B(),C=F();let k=A(E).smaller("md"),n=O({fullname:"",email:"",password:"",userLocation:null});async function T(){(await q.registration({email:n.email,password:n.password,fullname:n.fullname,userLocation:n.userLocation})).status==200&&(P().setLocation(),S.config({duration:1.5,top:"70vh"}),S.success({content:"\u0423\u0441\u043F\u0435\u0448\u043D\u043E!",onClose:()=>{C.push("/")}}))}let c=N(""),f=N([]);function z(i){for(let s of f.value)s.value==i&&(n.userLocation=s.location)}$(c,async(i,s)=>{if(i.trim().length>2&&i.length>s.length){var p="https://suggestions.dadata.ru/suggestions/api/4_1/rs/suggest/address",y={method:"POST",mode:"cors",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Token 93a66149524b08b26a740de84a773157ace019a0"},body:JSON.stringify({query:i,count:5,from_bound:{value:"city"},to_bound:{value:"settlement"}})};let w=await fetch(p,y);try{let r=JSON.parse(await w.text()).suggestions;f.value=[];for(let l of r){let u={value:l.value,location:{name:l.value,shortName:"",type:"Point",coordinates:[l.data.geo_lon,l.data.geo_lat]}};l.data.settlement?u.location.shortName=l.data.settlement:l.data.city?u.location.shortName=l.data.city:u.location.shortName=l.value,f.value.push(u)}}catch(r){console.log(r)}}});const R=D({email:g().required("\u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u043E\u043B\u0435").email("\u043D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442"),password:g().required("\u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u043E\u043B\u0435").min(6,"\u043C\u0438\u043D\u0438\u043C\u0443\u043C 6 \u0441\u0438\u043C\u0432\u043E\u043B\u043E\u0432"),fullname:g().required("\u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u043E\u043B\u0435"),startLocation:g().required("\u0437\u0430\u043F\u043E\u043B\u043D\u0438\u0442\u0435 \u043F\u043E\u043B\u0435")});return(i,s)=>{const p=m("a-input"),y=m("a-auto-complete"),w=m("a-button"),r=m("a-col"),l=m("router-link"),u=m("a-row");return b(),x("div",null,[e(I),a(k)?U("",!0):(b(),x("img",K)),a(k)?U("",!0):(b(),x("img",Q)),e(u,{type:"flex",justify:"center"},{default:t(()=>[e(r,{span:24,md:8,class:"pa-16"},{default:t(()=>[W,e(u,{type:"flex",justify:"center"},{default:t(()=>[e(r,{span:24},{default:t(()=>[e(a(G),{"validation-schema":a(R),onSubmit:s[4]||(s[4]=L=>T())},{default:t(({meta:L})=>[e(a(h),{name:"fullname",modelValue:a(n).fullname,"onUpdate:modelValue":s[0]||(s[0]=o=>a(n).fullname=o)},{default:t(({value:o,handleChange:d})=>[e(p,{onChange:d,value:o,placeholder:"\u0418\u0432\u0430\u043D \u0418\u0432\u0430\u043D\u043E\u0432",size:"large"},null,8,["onChange","value"])]),_:1},8,["modelValue"]),e(_,{name:"fade"},{default:t(()=>[e(a(v),{name:"fullname",class:"error-message"})]),_:1}),e(a(h),{name:"email",type:"email",modelValue:a(n).email,"onUpdate:modelValue":s[1]||(s[1]=o=>a(n).email=o)},{default:t(({value:o,handleChange:d})=>[e(p,{"onUpdate:value":d,value:o,placeholder:"email@email.com",size:"large",class:"mt-8"},null,8,["onUpdate:value","value"])]),_:1},8,["modelValue"]),e(_,{name:"fade"},{default:t(()=>[e(a(v),{name:"email",class:"error-message"})]),_:1}),e(a(h),{name:"password",type:"password",modelValue:a(n).password,"onUpdate:modelValue":s[2]||(s[2]=o=>a(n).password=o)},{default:t(({value:o,handleChange:d})=>[e(p,{"onUpdate:value":d,value:o,placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043F\u0430\u0440\u043E\u043B\u044C",size:"large",type:"password",class:"mt-8"},null,8,["onUpdate:value","value"])]),_:1},8,["modelValue"]),e(_,{name:"fade"},{default:t(()=>[e(a(v),{name:"password",class:"error-message"})]),_:1}),e(a(h),{name:"startLocation",modelValue:a(c),"onUpdate:modelValue":s[3]||(s[3]=o=>J(c)?c.value=o:c=o)},{default:t(({value:o,handleChange:d})=>[e(y,{value:o,"onUpdate:value":d,size:"large",style:{width:"100%"},class:"mt-8",options:a(f),placeholder:"\u0412\u0430\u0448\u0435 \u043C\u0435\u0441\u0442\u043E\u043F\u043E\u043B\u043E\u0436\u0435\u043D\u0438\u0435",onSelect:z},null,8,["value","onUpdate:value","options"])]),_:1},8,["modelValue"]),e(_,{name:"fade"},{default:t(()=>[e(a(v),{name:"location",class:"error-message"})]),_:1}),j("div",X,[e(w,{disabled:!L.valid,class:"ma-16 lets_go_btn",type:"primary",size:"large","html-type":"submit"},{default:t(()=>[Y]),_:2},1032,["disabled"])])]),_:1},8,["validation-schema"])]),_:1}),e(r,{span:24,class:"d-flex justify-center"},{default:t(()=>[e(l,{to:"/auth"},{default:t(()=>[Z]),_:1})]),_:1}),e(r,{span:24,class:"d-flex justify-center"},{default:t(()=>[e(l,{to:"/forgot-password"},{default:t(()=>[ee]),_:1})]),_:1})]),_:1})]),_:1})]),_:1})])}}};export{ne as default};
