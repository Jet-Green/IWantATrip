import{_ as q,m as K,Q as V,r as T,b as f,e,o as s,f as i,w as a,h as c,t as I,d as m,x as B,q as d,c as y,H as j,X as L,S as R,Y as z,Z as U,k as A,i as E,j as O,p as Q,v as M,F as N}from"./index.0a2bdc2d.js";const w=v=>(z("data-v-42f1fe7c"),v=v(),U(),v),X={style:{"text-align":"center"}},Y=w(()=>c("span",{class:"mdi mdi-compass-outline"},null,-1)),Z=w(()=>c("span",{class:"mdi mdi-calendar-arrow-right"},null,-1)),G=w(()=>c("span",{class:"mdi mdi-calendar-arrow-left"},null,-1)),J={class:"actions d-flex justify-center"},P=w(()=>c("span",{class:"mdi mdi-delete",style:{color:"#ff6600",cursor:"pointer"}},null,-1)),W=w(()=>c("span",{class:"mdi mdi-pen",style:{color:"#245159",cursor:"pointer"}},null,-1)),ee={key:0,class:"mdi mdi-eye",style:{color:"#245159",cursor:"pointer"}},te={key:1,class:"mdi mdi-eye-off",style:{color:"#245159",cursor:"pointer"}},se=w(()=>c("span",{class:"mdi mdi-content-copy",style:{color:"#245159",cursor:"pointer"}},null,-1)),ne={key:0},oe={__name:"CabinetTrip",props:["trip","actions"],setup(v){const H=v;let{actions:u,trip:o}=H,k=K(),g=V();const h=n=>{let t;return n.length==13?t=new Date(Number(n)):t=new Date(n),t.toLocaleDateString("ru-Ru",{year:"2-digit",month:"2-digit",day:"2-digit"})};function b(n){k.push(`/edit-trip?_id=${n}`)}function x(n){k.push({name:"CreateTripNoHelp",query:{id:n}})}async function D(n){o.isHidden=!o.isHidden,R.hideTrip(n,o.isHidden)}async function $(n){let{response:t}=await g.deleteById(n),{status:p}=t;p!="400"&&(o={})}let l=T(!1);return(n,t)=>{const p=f("a-divider"),C=f("a-popconfirm"),r=f("a-card");return e(o)._id?(s(),i(r,{key:0,class:L(["card",[e(o).isHidden?"overlay":""]]),hoverable:""},{default:a(()=>{var _;return[c("div",X,I(e(o).name),1),m(p,{class:"ma-4",style:{"border-color":"#205F79"}}),c("div",null,[Y,B(I(e(o).location),1)]),c("div",null,[Z,B(" "+I(`c ${h(e(o).start)}`)+" ",1),G,B(" "+I(`\u043F\u043E ${h(e(o).end)}`),1)]),c("div",J,[!((_=e(o).billsList)!=null&&_.length)>0&&e(u).includes("delete")?(s(),i(C,{key:0,title:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?","ok-text":"\u0414\u0430","cancel-text":"\u041D\u0435\u0442",onConfirm:t[0]||(t[0]=S=>$(e(o)._id))},{default:a(()=>[P]),_:1})):d("",!0),e(u).includes("edit")?(s(),i(C,{key:1,title:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?","ok-text":"\u0414\u0430","cancel-text":"\u041D\u0435\u0442",onConfirm:t[1]||(t[1]=S=>b(e(o)._id))},{default:a(()=>[W]),_:1})):d("",!0),e(u).includes("hide")?(s(),i(C,{key:2,title:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?","ok-text":"\u0414\u0430","cancel-text":"\u041D\u0435\u0442",onConfirm:t[2]||(t[2]=S=>D(e(o)._id))},{default:a(()=>[e(o).isHidden?(s(),y("span",te)):(s(),y("span",ee))]),_:1})):d("",!0),e(u).includes("copy")?(s(),i(C,{key:3,title:"\u0412\u044B \u0443\u0432\u0435\u0440\u0435\u043D\u044B?","ok-text":"\u0414\u0430","cancel-text":"\u041D\u0435\u0442",onConfirm:t[3]||(t[3]=S=>x(e(o)._id))},{default:a(()=>[se]),_:1})):d("",!0),e(u).includes("info")?(s(),y("span",{key:4,class:"mdi mdi-information-outline",onClick:t[4]||(t[4]=S=>e(k).push({path:"customers-trip",query:{_id:e(o)._id}}))})):d("",!0),e(o).moderationMessage&&e(u).includes("msg")?(s(),y("span",{key:5,class:"mdi mdi-email-outline",onClick:t[5]||(t[5]=S=>j(l)?l.value=!e(l):l=!e(l))})):d("",!0)]),e(l)?(s(),y("div",ne," \u0417\u0430\u043C\u0435\u0447\u0430\u043D\u0438\u044F: "+I(e(o).moderationMessage),1)):d("",!0)]}),_:1},8,["class"])):d("",!0)}}},F=q(oe,[["__scopeId","data-v-42f1fe7c"]]),ae=B(" \u041D\u0435\u0442 \u0442\u0443\u0440\u043E\u0432 "),ie=B(" \u041D\u0435\u0442 \u0442\u0443\u0440\u043E\u0432 "),re={__name:"CreatedTrips",setup(v){let H=A(),u=V();K(),E(O).smaller("md");let k=T([]),g=T([]),h=T([]),b=T(!0);Q(async()=>{b.value=!0;let D=H.user._id,l=(await u.getCreatedTripsInfoByUserId(D)).data;b.value=!1;for(let n of l){if(n.start<Date.now()){h.value.push(n);continue}n.isModerated?k.value.push(n):g.value.push(n)}});let x=T(2);return(D,$)=>{const l=f("a-spin"),n=f("a-col"),t=f("a-row"),p=f("a-collapse-panel"),C=f("a-collapse");return s(),i(t,null,{default:a(()=>[e(b)?(s(),i(n,{key:0,span:24,class:"d-flex justify-center"},{default:a(()=>[m(l,{size:"large"})]),_:1})):(s(),i(n,{key:1,span:24},{default:a(()=>[m(C,{activeKey:e(x),"onUpdate:activeKey":$[0]||($[0]=r=>j(x)?x.value=r:x=r),ghost:""},{default:a(()=>[e(g).length?(s(),i(p,{key:"1",header:"\u041D\u0430 \u043C\u043E\u0434\u0435\u0440\u0430\u0446\u0438\u0438"},{default:a(()=>[e(g).length>0?(s(),i(t,{key:0,gutter:[8,8],class:"mt-8"},{default:a(()=>[(s(!0),y(N,null,M(e(g),(r,_)=>(s(),i(n,{lg:8,sm:12,xs:24,key:_},{default:a(()=>[m(F,{trip:r,actions:["delete","info","edit","msg"]},null,8,["trip"])]),_:2},1024))),128))]),_:1})):d("",!0)]),_:1})):d("",!0),m(p,{key:"2",header:"\u0414\u0435\u0439\u0441\u0442\u0432\u0443\u044E\u0449\u0438\u0435 \u0442\u0443\u0440\u044B"},{default:a(()=>[e(k).length>0?(s(),i(t,{key:0,gutter:[8,8],class:"mt-8"},{default:a(()=>[(s(!0),y(N,null,M(e(k),(r,_)=>(s(),i(n,{lg:8,sm:12,xs:24,key:_},{default:a(()=>[m(F,{trip:r,actions:["delete","info","copy","hide","edit"]},null,8,["trip"])]),_:2},1024))),128))]),_:1})):(s(),i(t,{key:1,lg:8,sm:12,xs:24},{default:a(()=>[ae]),_:1}))]),_:1}),m(p,{key:"3",header:"\u0410\u0440\u0445\u0438\u0432\u043D\u044B\u0435 \u0442\u0443\u0440\u044B"},{default:a(()=>[e(h).length>0?(s(),i(t,{key:0,gutter:[8,8],class:"mt-8"},{default:a(()=>[(s(!0),y(N,null,M(e(h),(r,_)=>(s(),i(n,{lg:8,sm:12,xs:24,key:_},{default:a(()=>[m(F,{trip:r,actions:["delete","info","copy","edit"]},null,8,["trip"])]),_:2},1024))),128))]),_:1})):(s(),i(t,{key:1,lg:8,sm:12,xs:24},{default:a(()=>[ie]),_:1}))]),_:1})]),_:1},8,["activeKey"])]),_:1}))]),_:1})}}};export{re as default};
