import{_ as V,u as H,Q as q,r as x,m as A,p as E,b as f,o as r,c,d as o,w as e,g as P,h as t,t as u,e as a,f as T,q as I,F as S,v as j,H as Q,x as v,Y as U,Z as Y}from"./index.0a2bdc2d.js";const z=g=>(U("data-v-5dadcf77"),g=g(),Y(),g),Z={style:{"overflow-x":"hidden"}},$={class:"ma-0"},G=["src"],J=["src"],K=z(()=>t("div",{class:"custom-slick-arrow",style:{left:"10px","z-index":"1"}},[t("span",{class:"mdi mdi-48px mdi-chevron-left"})],-1)),O=z(()=>t("div",{class:"custom-slick-arrow",style:{right:"10px"}},[t("span",{class:"mdi mdi-48px mdi-chevron-right"})],-1)),W=v(" \u041F\u0440\u043E\u0434\u043E\u043B\u0436\u0438\u0442\u0435\u043B\u044C\u043D\u043E\u0441\u0442\u044C: "),X=v(" \u0411\u043B\u0438\u0436\u0430\u0439\u0448\u0438\u0439 \u0432\u044B\u0435\u0437\u0434: "),ee=v(" \u0426\u0435\u043D\u0430 "),te=["innerHTML"],se={key:0},ae={key:1,class:"mdi mdi-check-outline"},oe=v("\u043E\u0442\u043F\u0440\u0430\u0432\u0438\u0442\u044C \u043D\u0430 \u0434\u043E\u0440\u0430\u0431\u043E\u0442\u043A\u0443"),le={__name:"TripModeration",setup(g){let B=H(),h=q(),s=x({}),d=x(!1),y=x(!1),_=x(""),b=A();async function C(l){d.value||(y.value=!0,(await h.moderateTrip(l)).status!=400?setTimeout(()=>{d.value=!0,y.value=!1,b.push("/cabinet/moderation")},500):d.value=!1)}async function D(){(await h.sendModerationMessage(s.value._id,_.value)).status==200&&b.push("/cabinet/moderation")}E(async()=>{let{data:l}=await h.getById(B.query._id);s.value=l,d.value=s.value.isModerated,_.value=s.value.moderationMessage});const L=l=>{let i;return l.length==13?i=new Date(Number(l)):i=new Date(l),i.toLocaleDateString("ru-Ru",{year:"2-digit",month:"2-digit",day:"2-digit"})};function N(l){return s.value.images[l]}return(l,i)=>{const w=f("a-spin"),R=f("a-carousel"),p=f("a-col"),m=f("a-row"),M=f("a-button"),F=f("a-textarea");return r(),c("div",Z,[o(P,{backRoute:"/cabinet/moderation"}),o(m,{class:"justify-center d-flex"},{default:e(()=>[o(p,{xs:22,xl:16},{default:e(()=>[t("h2",$,u(a(s).name),1),a(s)._id?I("",!0):(r(),T(w,{key:0,size:"large"})),a(s)._id?(r(),T(m,{key:1,gutter:[12,12],class:"text justify-center d-flex"},{default:e(()=>[o(p,{xs:24,md:12},{default:e(()=>[o(R,{arrows:"","dots-class":"slick-dots slick-thumb"},{customPaging:e(n=>[t("a",null,[t("img",{src:N(n.i)},null,8,G)])]),prevArrow:e(()=>[K]),nextArrow:e(()=>[O]),default:e(()=>[(r(!0),c(S,null,j(a(s).images,(n,k)=>(r(),c("div",{key:k},[t("img",{src:n,alt:"",srcset:""},null,8,J)]))),128))]),_:1})]),_:1}),o(p,{xs:24,md:12,class:"pa-8"},{default:e(()=>[t("p",null,"\u0410\u0432\u0442\u043E\u0440 \u0442\u0443\u0440\u0430: "+u(a(s).creatorId),1),t("p",null,u(a(s).offer),1),t("div",null,[W,t("b",null,u(a(s).duration)+" \u0434\u043D.",1)]),t("div",null,[X,t("b",null,u(L(a(s).start)),1)]),t("div",null,[ee,(r(!0),c(S,null,j(a(s).cost,(n,k)=>(r(),c("div",{key:k,class:"cost"},[v(u(n.first)+" : ",1),t("b",null,u(n.price)+" \u0440\u0443\u0431.",1)]))),128))])]),_:1}),o(p,{xs:24},{default:e(()=>[t("span",{innerHTML:a(s).description},null,8,te)]),_:1})]),_:1})):I("",!0)]),_:1})]),_:1}),o(m,{class:"justify-center d-flex",style:{"margin-top":"30px"}},{default:e(()=>[o(p,{xs:22,xl:16},{default:e(()=>[o(M,{block:"",size:"large",loading:a(y),disabled:a(d),onClick:i[0]||(i[0]=n=>C(a(s)._id))},{default:e(()=>[a(d)?(r(),c("span",ae)):(r(),c("span",se,"\u043F\u0440\u0438\u043D\u044F\u0442\u044C"))]),_:1},8,["loading","disabled"])]),_:1})]),_:1}),o(m,{class:"justify-center d-flex",style:{"margin-top":"30px"}},{default:e(()=>[o(p,{xs:22,xl:16},{default:e(()=>[o(F,{placeholder:"\u0412\u0430\u0448\u0438 \u043A\u043E\u043C\u043C\u0435\u043D\u0442\u0430\u0440\u0438\u0438",size:"large",value:a(_),"onUpdate:value":i[1]||(i[1]=n=>Q(_)?_.value=n:_=n)},null,8,["value"]),o(m,{class:"justify-center d-flex mt-8"},{default:e(()=>[o(M,{disabled:a(d),size:"large",onClick:D},{default:e(()=>[oe]),_:1},8,["disabled"])]),_:1})]),_:1})]),_:1})])}}},ie=V(le,[["__scopeId","data-v-5dadcf77"]]);export{ie as default};
