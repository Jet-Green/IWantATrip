import{m as z,u as P,Q as R,r as w,p as $,b as x,o as l,c as a,d,w as u,F as T,e as i,x as f,t as o,h as e,v as B,f as q,q as D}from"./index.0a2bdc2d.js";const E=e("h3",null,"\u0418\u043D\u0444\u043E\u0440\u043C\u0430\u0446\u0438\u044F \u043E \u0442\u0443\u0440\u0435",-1),M=f("\u041F\u043E\u043A\u0443\u043F\u0430\u0442\u0435\u043B\u0438"),Q=e("div",null,"\u0417\u0430\u0431\u0440\u043E\u043D\u0438\u0440\u043E\u0432\u0430\u043B\u043E:",-1),A=e("div",null,"\u041E\u043F\u043B\u0430\u0442\u0438\u043B\u043E:",-1),G=e("span",{class:"mdi mdi-account-outline",style:{}},null,-1),H=e("span",{class:"mdi mdi-phone-outline",style:{}},null,-1),J=["href"],K={class:"d-flex justify-end"},L=e("span",null,"\u0418\u0442\u043E\u0433\u043E: ",-1),O={class:"d-flex justify-end"},U={key:0,style:{color:"#bcc662"}},W=e("span",{class:"mdi mdi-check-all",style:{"font-size":"20px"}},null,-1),X=f(" \u043E\u043F\u043B\u0430\u0447\u0435\u043D "),Y=[W,X],Z={key:1,style:{display:"flex","align-items":"center"}},I=e("span",{class:"mdi mdi-close",style:{"font-size":"20px"}},null,-1),ee=f(" \u043D\u0435 \u043E\u043F\u043B\u0430\u0447\u0435\u043D "),te=[I,ee],oe={__name:"CustomersTrip",setup(se){const F=z(),C=P(),S=R();let v=w([]);const _=w({}),y=w({}),N=new Set;C.query.id;let p=w({});$(async()=>{let{data:k}=await S.getFullTripById(C.query._id);p.value=k;let h=[];for(let t of p.value.billsList)h.push(t.userId);if(h.length){let{data:t}=await S.getCustomers(h);v.value=t}for(let t of p.value.billsList)for(let s of t.cart){let n={};N.has(s.costType)||(_.value[s.costType]=[],y.value[s.costType]=[],N.add(s.costType)),n=s.count,t.isBoughtNow==!0?(_.value[s.costType].push(n),y.value[s.costType].push(n)):_.value[s.costType].push(n)}for(let t of N){let s=y.value[t].reduce((m,b)=>m+b,0);y.value[t]=s;let n=_.value[t].reduce((m,b)=>m+b,0);_.value[t]=n}});function j(k){return`tel:${k}`}return(k,h)=>{const t=x("a-breadcrumb-item"),s=x("a-breadcrumb"),n=x("a-col"),m=x("a-card"),b=x("a-row");return l(),a(T,null,[d(n,{span:24,class:"mb-8"},{default:u(()=>[E,d(s,null,{default:u(()=>[d(t,{onClick:h[0]||(h[0]=c=>i(F).push("/cabinet/created-trips"))},{default:u(()=>[f(o(i(p).name),1)]),_:1}),d(t,null,{default:u(()=>[M]),_:1})]),_:1})]),_:1}),d(b,{gutter:[8,8]},{default:u(()=>[d(n,{lg:8,sm:12,xs:24},{default:u(()=>[d(m,{style:{height:"100%"}},{default:u(()=>[e("div",null,"\u041C\u0430\u043A\u0441\u0438\u043C\u0443\u043C: "+o(i(p).maxPeople)+" \u0447\u0435\u043B.",1),Q,(l(!0),a(T,null,B(_.value,(c,r)=>(l(),a("div",null,"\u041F\u043E \u0446\u0435\u043D\u0435 "+o(r)+" - "+o(c)+" \u0447\u0435\u043B.",1))),256)),A,(l(!0),a(T,null,B(y.value,(c,r)=>(l(),a("div",null,"\u041F\u043E \u0446\u0435\u043D\u0435 "+o(r)+" - "+o(c)+" \u0447\u0435\u043B.",1))),256))]),_:1})]),_:1}),(l(!0),a(T,null,B(i(p).billsList,(c,r)=>(l(),q(n,{lg:8,sm:12,xs:24},{default:u(()=>[e("div",null,[i(v)[r]?(l(),q(m,{key:0,hoverable:"",class:"card"},{default:u(()=>[e("div",null,[G,f(" "+o(i(v)[r].fullname),1)]),e("div",null,[H,e("a",{href:j(i(v)[r].phone)},o(i(v)[r].phone),9,J)]),(l(!0),a(T,null,B(c.cart,g=>(l(),a("div",null,o(g.costType)+" "+o(g.count)+" x "+o(g.cost)+" \u0440\u0443\u0431. ",1))),256)),e("div",K,[L,f(" "+o(c.cart.reduce((g,V)=>g+V.cost*V.count,0))+" \u0440\u0443\u0431. ",1)]),e("div",O,[e("b",null,[c.isBoughtNow?(l(),a("span",U,Y)):(l(),a("span",Z,te))])])]),_:2},1024)):D("",!0)])]),_:2},1024))),256))]),_:1})],64)}}};export{oe as default};
